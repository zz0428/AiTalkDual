<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AiTalkDual - Natural AI Conversations</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1><i class="fas fa-robot"></i> AiTalkDual</h1>
            <p>Natural AI conversations where models don't know they're talking to AI</p>
        </header>

        <!-- Configuration Panel -->
        <div class="config-panel" id="configPanel">
            <h3><i class="fas fa-cog"></i> Configuration</h3>
            
            <div class="config-grid">
                <div class="config-item">
                    <label for="model1">Model 1:</label>
                    <select id="model1" class="model-select">
                        <option value="qwen2:1.5b">qwen2:1.5b</option>
                        <option value="llama3.2:1b">llama3.2:1b</option>
                    </select>
                    <div class="model-icon">üë®‚ÄçüöÄ</div>
                </div>

                <div class="config-item">
                    <label for="model2">Model 2:</label>
                    <select id="model2" class="model-select">
                        <option value="llama3.2:1b">llama3.2:1b</option>
                        <option value="qwen2:1.5b">qwen2:1.5b</option>
                    </select>
                    <div class="model-icon">ÔøΩ‚Äçüéì</div>
                </div>

                <div class="config-item full-width">
                    <label for="model1Context">Model 1 Private Context:</label>
                    <textarea id="model1Context" rows="3" 
                        placeholder="Private context that only Model 1 will see...">You are an experienced astronaut who has just returned from a mission to the International Space Station. You're feeling excited and want to share your experiences with someone. Start by telling them about the most amazing moment during your recent space mission.</textarea>
                </div>

                <div class="config-item full-width">
                    <label for="model2Context">Model 2 Private Context:</label>
                    <textarea id="model2Context" rows="3" 
                        placeholder="Private context that only Model 2 will see...">You are a curious high school student who is fascinated by space and science. You just met someone who seems to have interesting stories about space. You're eager to learn and ask thoughtful questions about their experiences.</textarea>
                </div>

                <div class="config-item">
                    <label for="turns">Conversation Turns:</label>
                    <input type="number" id="turns" value="4" min="1" max="20">
                </div>

                <div class="config-item">
                    <label for="typingSpeed">Typing Speed (chars/sec):</label>
                    <input type="range" id="typingSpeed" min="10" max="200" value="50">
                    <span id="speedValue">50</span>
                </div>
            </div>

            <div class="control-buttons">
                <button id="startBtn" class="btn btn-primary">
                    <i class="fas fa-play"></i> Start Natural Conversation
                </button>
                <button id="stopBtn" class="btn btn-danger" style="display: none;">
                    <i class="fas fa-stop"></i> Stop
                </button>
                <button id="clearBtn" class="btn btn-secondary">
                    <i class="fas fa-trash"></i> Clear
                </button>
            </div>

            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <p><strong>Improved Approach:</strong> Each AI model gets its own private context and doesn't know it's talking to another AI. This creates more natural, authentic conversations!</p>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <h3><i class="fas fa-comments"></i> Natural Conversation</h3>
                <div class="conversation-status" id="conversationStatus">
                    Ready to start
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <i class="fas fa-robot"></i>
                    <p>Configure the private contexts for each AI model and click "Start Natural Conversation" to begin!</p>
                    <small>Each model will only see their own context and won't know they're talking to another AI.</small>
                </div>
            </div>
            
            <div class="progress-bar" id="progressBar" style="display: none;">
                <div class="progress-fill" id="progressFill"></div>
                <span class="progress-text" id="progressText">Turn 1 of 4</span>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>
                <i class="fas fa-heart"></i> 
                Powered by <a href="https://ollama.ai" target="_blank">Ollama</a> 
                | <a href="https://github.com/zz0428/AiTalkDual" target="_blank">GitHub</a>
            </p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-robot fa-spin"></i>
            <p>Initializing private contexts...</p>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
